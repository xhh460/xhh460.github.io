<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="小灰灰"><meta name="renderer" content="webkit"><meta name="copyright" content="小灰灰"><meta name="keywords" content="小灰灰"><meta name="description" content=""><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Servlet · xhh's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/people1.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="/img/assets/people.png"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">xiaohuihui</div><div class="profile-signature">for me</div><div class="friends"><div>FRIENDS</div><span><a href="//www.cnblogs.com/lc-snail/" target="_black">friendA</a></span><span><a href="//github.com/" target="_black">friendB</a></span><span><a href="//github.com/" target="_black">friendC</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 70vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">xhh's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">Servlet</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-calendar"></i><span>2020-10-09 19:35:41</span></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">7.2k</span> | Reading time: <span class="post-count">33</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><h3 id="Servlet生命周期"><a href="#Servlet生命周期" class="headerlink" title="Servlet生命周期"></a>Servlet生命周期</h3><p><img src="/images/servlet/image-20201010205159550.png" alt="image-20201010205159550"></p>
<p>​    Servlet的整个生命周期过程的执行，均由Web服务器负责管理。即Servlet从创建到服务到销毁的整个过程中方法的调用，都是由Web服务器负责调用执行，程序员无法控制其流程。</p>
<p>​    但程序员可以获取到Servlet的这些生命周期时间点，并可以指定让Servlet做一些具体业务相关的事情。</p>
<h4 id="生命周期方法执行流程图"><a href="#生命周期方法执行流程图" class="headerlink" title="生命周期方法执行流程图"></a>生命周期方法执行流程图</h4><p><img src="/images/servlet/image-20201010205744853.png" alt="image-20201010205744853"></p>
<p>测试：</p>
<ul>
<li>编写测试类SomeServlet.class</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/11 15:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SomeServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"创建SomeServlet实例"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"初始化SomeServlet实例"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"执行SomeServlet实例的service()方法"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"销毁SomeServlet实例"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置web.xml文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--注册Servlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>some-servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>SomeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">&lt;!--Servlet映射--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>some-servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/some<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>开启tomcat服务器</li>
<li>访问路径<code>http://localhost:8080/web/some</code></li>
<li>控制台输出：</li>
</ul>
<p><img src="/images/servlet/image-20201011153838778.png" alt="image-20201011153838778"></p>
<h4 id="Servlet特征"><a href="#Servlet特征" class="headerlink" title="Servlet特征"></a>Servlet特征</h4><ol>
<li>Servlet是单例多线程的。</li>
<li>一个Servlet实例只会执行一次无参构造器与init()方法，并且是在第一次访问时执行。</li>
<li>用户每提交一次对当前Servlet的请求，就会执行一次service()方法。</li>
<li>一个Servlets实例只会执行一次destroy()方法，在应用停止时执行。</li>
<li>由于Servlet是单例多线程的，所以为了保证其线程安全性，一般情况下是不为Servlet类定义可修改的成员变量的。因为每个线程均可修改这个成员变量，会出现线程安全问题。</li>
<li>默认情况下，Servlet在Web容器启动时是不会被实例化的。</li>
</ol>
<h4 id="Web容器启动时创建Servlet实例"><a href="#Web容器启动时创建Servlet实例" class="headerlink" title="Web容器启动时创建Servlet实例"></a>Web容器启动时创建Servlet实例</h4><p>当创建多个实例的时候，0的优先级最高，会先被实例化，依此往下。</p>
<p><img src="/images/servlet/image-20201011161711581.png" alt="image-20201011161711581"></p>
<h4 id="Servlet中的两个map"><a href="#Servlet中的两个map" class="headerlink" title="Servlet中的两个map"></a>Servlet中的两个map</h4><p>当Servlet实例被创建后，会得到该Servlet实例的引用，存放到一个Map集合中。该Map集合的key为url，而Value为Servlet实例的引用即<code>Map&lt;String,Servlet&gt;</code></p>
<p><img src="/images/servlet/20180330173903885" alt="这里写图片描述"></p>
<p><strong>当Web容器从用户请求中分离出URI后，到第一个Map中没有找到其所对应的Servlet实例，则会马上查找到第二个Map，从中找到其所对应类名，再根据反射机制，创建这个Servlet实例，然后再将这个创建好的Servlet的引用放入到第一个Map中</strong></p>
<h4 id="ServletConfig的使用"><a href="#ServletConfig的使用" class="headerlink" title="ServletConfig的使用"></a>ServletConfig的使用</h4><p>ServletConfig用来获取<code>web.xml</code>文件中的配置信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/11 15:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> ServletConfig config;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SomeServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"创建SomeServlet实例"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.config = servletConfig;</span><br><span class="line">    System.out.println(<span class="string">"config = "</span>+ config);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取Servlet的名称</span></span><br><span class="line">    String servletName = config.getServletName();</span><br><span class="line">    System.out.println(<span class="string">"servletName = "</span>+ servletName);</span><br><span class="line">    <span class="comment">//获取ServletContext对象</span></span><br><span class="line">    ServletContext servletContext = config.getServletContext();</span><br><span class="line">    System.out.println(<span class="string">"servletContext = "</span>+servletContext);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取所有的初始化参数</span></span><br><span class="line">    Enumeration&lt;String&gt; names = config.getInitParameterNames();</span><br><span class="line">    <span class="comment">//遍历枚举</span></span><br><span class="line">    <span class="keyword">while</span> (names.hasMoreElements())&#123;</span><br><span class="line">      String name = names.nextElement();</span><br><span class="line">      String value = config.getInitParameter(name);</span><br><span class="line">      System.out.println(name +<span class="string">"="</span>+ value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"销毁SomeServlet实例"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/servlet/image-20201012145748169.png" alt="image-20201012145748169"></p>
<h4 id="ServletContext的用法"><a href="#ServletContext的用法" class="headerlink" title="ServletContext的用法"></a>ServletContext的用法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/13 11:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletTest01</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> ServletConfig config;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ServletTest01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//    System.out.println("创建Servlet实例");</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.config = config;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取ServletContext对象</span></span><br><span class="line">    ServletContext sc = config.getServletContext();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取所有初始化参数名</span></span><br><span class="line">    Enumeration&lt;String&gt; names = sc.getInitParameterNames();</span><br><span class="line">    <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">      String name = names.nextElement();</span><br><span class="line">      String value = sc.getInitParameter(name);</span><br><span class="line">      System.out.println(name + <span class="string">"="</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置域属性,这个域属性是全局的,在另外的Servlet中也能访问,所有Servlet共享</span></span><br><span class="line">    sc.setAttribute(<span class="string">"email"</span>,<span class="string">"xhh@460"</span>);</span><br><span class="line">    sc.setAttribute(<span class="string">"mobile"</span>,<span class="string">"18881546487"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取域属性的值</span></span><br><span class="line">    String email = (String)sc.getAttribute(<span class="string">"email"</span>);</span><br><span class="line">    String mobile = (String)sc.getAttribute(<span class="string">"mobile"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"email="</span>+email);     <span class="comment">//xhh@460</span></span><br><span class="line">    System.out.println(<span class="string">"mobile="</span>+mobile);    <span class="comment">//18881546487</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="lt-url-pattern-gt-的设置"><a href="#lt-url-pattern-gt-的设置" class="headerlink" title="&lt; url-pattern/&gt;的设置"></a>&lt; url-pattern/&gt;的设置</h4><h5 id="1-精确路径模式-多个url可以访问一个Servlet"><a href="#1-精确路径模式-多个url可以访问一个Servlet" class="headerlink" title="(1)精确路径模式:多个url可以访问一个Servlet"></a>(1)精确路径模式:多个url可以访问一个Servlet</h5><p><img src="/images/Servlet/image-20201013175252868.png" alt="image-20201013175252868"></p>
<h5 id="2-通配符路径模式"><a href="#2-通配符路径模式" class="headerlink" title="(2)通配符路径模式"></a>(2)通配符路径模式</h5><p><img src="/images/Servlet/image-20201013175801610.png" alt="image-20201013175801610"></p>
<h5 id="3-全路径匹配模式和后缀名匹配模式"><a href="#3-全路径匹配模式和后缀名匹配模式" class="headerlink" title="(3)全路径匹配模式和后缀名匹配模式"></a>(3)全路径匹配模式和后缀名匹配模式</h5><p><img src="/images/Servlet/image-20201013180919720.png" alt="image-20201013180919720"></p>
<p>但是此处带斜杆的通配符路径模式匹配与后缀名模式不能同时使用，例如/a/*.do等。</p>
<h4 id="urlPattern匹配原则"><a href="#urlPattern匹配原则" class="headerlink" title="urlPattern匹配原则"></a>urlPattern匹配原则</h4><ul>
<li>路径优先与后缀</li>
<li>精确路径优先</li>
<li>最长路径优先匹配</li>
</ul>
<h3 id="Servlet核心"><a href="#Servlet核心" class="headerlink" title="Servlet核心"></a>Servlet核心</h3><h4 id="GenericServlet"><a href="#GenericServlet" class="headerlink" title="GenericServlet"></a>GenericServlet</h4><p>​    在通过实现Servlet接口来定义Servlet时存在一个很不方便的问题：有太多不需要的方法必须要实现。通常我们只关心service()方法，在service()方法中完成业务逻辑，但由于Servlet接口中还存在另外四个方法，所以必须也要实现。</p>
<h5 id="抽象类实现接口"><a href="#抽象类实现接口" class="headerlink" title="抽象类实现接口"></a>抽象类实现接口</h5><p>​    由于Servlet中通常只使用service()方法，其它四个方法基本不用，但也需要实现。</p>
<p>​    所以我们就定义一个抽象类，让其实现Servlet接口，并以简单方式对service()以外的其它方法进行实现，即要么是空方法体，要么返回null。</p>
<p>​    而将service()方法声明为抽象方法。这样以后再定义Servlet时就只需要继承自这个通用的抽象类即可，无需再实现Servlet接口了。</p>
<p>​    这是一种设计模式，称为”缺省构造器”设计模式。</p>
<p><code>GenericServlet.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/14 11:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 缺省适配器设计模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span>,<span class="title">ServletConfig</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> ServletConfig config;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.config = config;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span>   <span class="comment">//抽象方法,专门让子类来实现</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/***</span></span><br><span class="line"><span class="comment">   * 以下是重写ServletConfig接口的方法</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getServletName();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getServletContext();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getInitParameter</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getInitParameter(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title">getInitParameterNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getInitParameterNames();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="GenericServlet中的init方法"><a href="#GenericServlet中的init方法" class="headerlink" title="GenericServlet中的init方法"></a>GenericServlet中的init方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/14 11:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 缺省适配器设计模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span>,<span class="title">ServletConfig</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> ServletConfig config;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//模板方法设计模式</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.config = config;</span><br><span class="line">    <span class="comment">//调用无参的init()方法</span></span><br><span class="line">    <span class="keyword">this</span>.init();</span><br><span class="line">    System.out.println(<span class="string">"======父类init======"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//无参init()方法,让子类来重写</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span>   <span class="comment">//抽象方法,专门让子类来实现</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/***</span></span><br><span class="line"><span class="comment">   * 以下是实现ServletConfig接口的方法</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getServletName();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getServletContext();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getInitParameter</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getInitParameter(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title">getInitParameterNames</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config.getInitParameterNames();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>以上只是探究源码的方式，真正开发直接继承内部GenericServlet类即可。</p>
<h4 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a>HttpServlet</h4><h5 id="自定义HttpServlet-java"><a href="#自定义HttpServlet-java" class="headerlink" title="自定义HttpServlet.java"></a>自定义HttpServlet.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.GenericServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/15 14:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"LoginServlet"</span>);</span><br><span class="line">    HttpServletRequest request = (HttpServletRequest) req;</span><br><span class="line">    HttpServletResponse response = (HttpServletResponse) res;</span><br><span class="line"></span><br><span class="line">    service(request,response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span>&#123;</span><br><span class="line">    <span class="comment">//获取请求的提交方式</span></span><br><span class="line">    String method = request.getMethod();</span><br><span class="line">    System.out.println(<span class="string">"method = "</span> + method);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"POST"</span>.equals(method)) &#123;</span><br><span class="line">      doPost(request, response);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"GET"</span>.equals(method)) &#123;</span><br><span class="line">      doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="LoginServlet继承HttpServlet"><a href="#LoginServlet继承HttpServlet" class="headerlink" title="LoginServlet继承HttpServlet"></a>LoginServlet继承HttpServlet</h5><p>直接使用即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.GenericServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/14 16:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"非法用户"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"进入用户验证身份阶段"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="如果get和post请求都支持的话，使用以下写法"><a href="#如果get和post请求都支持的话，使用以下写法" class="headerlink" title="如果get和post请求都支持的话，使用以下写法:"></a>如果get和post请求都支持的话，使用以下写法:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/14 16:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"进入用户验证身份阶段"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h4><h5 id="请求的生命周期"><a href="#请求的生命周期" class="headerlink" title="请求的生命周期"></a>请求的生命周期</h5><p>HttpServletRequest实例对象是什么时候创建和销毁的呢?</p>
<p>​    当客户端浏览器将请求(字符序列)发送到服务器后，服务器会根据HTTP请求协议的格式对请求进行解析。同时，服务器会创建 HttpServletRequest的实现类RequestFacade的对象，即请求对象。然后调用相应的set方法，将解析出的数据封装到请求对象中。此时HttpServletRequest实例就创建并初始完毕了，也就是说，请求对象是服务器创建的。</p>
<p>​    当服务器向客户端发送响应结束后，HttpServletRequest实例对象是被服务器销毁。</p>
<p>​    一次请求对应一个请求对象，另外一次请求对应着另外一个请求对象，与之前的请求对象没有任何关系。HttpServletRequest实例的生命周期很短暂。</p>
<h5 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h5><p>​    HttpServletRequest对于请求中所携带的参数是以Map的形式接收的，并且该Map的key为String，value为String数组。</p>
<p>​    为很么value为String数组而不是String？因为Http请求协议允许一个请求参数具有多个值的情况出现。</p>
<p><img src="/images/Servlet/image-20201019114740495.png" alt="image-20201019114740495"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/15 20:53</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1.请求参数是放在Map中的</span></span><br><span class="line"><span class="comment"> * 2.这个Map的key为请求参数的名称,为String类型,</span></span><br><span class="line"><span class="comment"> *   这个Map的value为请求参数的所有值,为String[]类型</span></span><br><span class="line"><span class="comment"> * 3.使用最多的是getParameter()方法,其等价于getParameterValues()[0]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RegisterServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    doGet(request, response);</span><br><span class="line">    System.out.println(<span class="string">"POST"</span>);     <span class="comment">//POST</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取指定名称的请求参数值</span></span><br><span class="line">    <span class="comment">//getParameter("username")方法,本质上等同于getParameterValues("username")[0]</span></span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String ageStr = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line">    String hobby1 = request.getParameterValues(<span class="string">"hobby"</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    Integer age = Integer.valueOf(ageStr);</span><br><span class="line">    System.out.println(<span class="string">"name = "</span>+name);     <span class="comment">//name = admin</span></span><br><span class="line">    System.out.println(<span class="string">"age = "</span>+age);       <span class="comment">//age = 20</span></span><br><span class="line">    System.out.println(<span class="string">"hobby[1] = "</span>+hobby1);    <span class="comment">//hobby[1] = swimming</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取所有的请求参数名称</span></span><br><span class="line">    Enumeration&lt;String&gt; names = request.getParameterNames();</span><br><span class="line">    <span class="comment">//遍历枚举</span></span><br><span class="line">    <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">      String eleName = names.nextElement();</span><br><span class="line">      String eleValue = request.getParameter(eleName);</span><br><span class="line">      System.out.println(eleName + <span class="string">"="</span> +eleValue);    <span class="comment">//age=20  hobby=running</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取指定参数的所有值</span></span><br><span class="line">    String[] hobby = request.getParameterValues(<span class="string">"hobby"</span>);</span><br><span class="line">    <span class="keyword">for</span> (String h :hobby)&#123;</span><br><span class="line">      System.out.println(h);      <span class="comment">//running swimming reading</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取存放请求参数的Map</span></span><br><span class="line">    Map&lt;String,String[]&gt; map = request.getParameterMap();</span><br><span class="line">    <span class="keyword">for</span> (String key : map.keySet())&#123;</span><br><span class="line">      System.out.println(key + <span class="string">"==&gt;"</span> +request.getParameter(key));   <span class="comment">//username==&gt;admin age==&gt;20 hobby==&gt;running</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h5 id="域属性"><a href="#域属性" class="headerlink" title="域属性"></a>域属性</h5><p>​    在Request中也有域属性空间，用于存放有名称的数据。该数据只在当前Request请求中进行访问。</p>
<p><strong>(1)常用方法</strong></p>
<p>对于Request中的域属性操作的方法有：</p>
<ul>
<li>void setAttribute(String name,Object object)：在Request域属性空间中放入数据。其生命周期域与Request的生命周期相同。</li>
<li>Object getAttribute(String name)：获取域属性。 </li>
</ul>
<h6 id="SomeServlet-java"><a href="#SomeServlet-java" class="headerlink" title="SomeServlet.java"></a>SomeServlet.java</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/19 16:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//向请求中放入属性</span></span><br><span class="line">    request.setAttribute(<span class="string">"username"</span>,<span class="string">"小灰灰"</span>);</span><br><span class="line">    request.setAttribute(<span class="string">"address"</span>,<span class="string">"YunProvince"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从请求中删除指定域属性</span></span><br><span class="line">    request.removeAttribute(<span class="string">"address"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将请求转发给OtherServlet</span></span><br><span class="line">    request.getRequestDispatcher(<span class="string">"/other"</span>).forward(request,response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="OtherServlet-java"><a href="#OtherServlet-java" class="headerlink" title="OtherServlet.java"></a>OtherServlet.java</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/19 16:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"OtherServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OtherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//从请求中获取指定名称的域属性</span></span><br><span class="line">    String username = (String)request.getAttribute(<span class="string">"username"</span>);</span><br><span class="line">    String address = (String)request.getAttribute(<span class="string">"address"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取请求中的所有域属性名称</span></span><br><span class="line">    Enumeration&lt;String&gt; names = request.getAttributeNames();</span><br><span class="line">    <span class="keyword">while</span> (names.hasMoreElements())&#123;</span><br><span class="line">      String name = names.nextElement();</span><br><span class="line">      System.out.println(name+<span class="string">"===="</span>+request.getAttribute(name));</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">       javax.servlet.forward.request_uri====/web/some</span></span><br><span class="line"><span class="comment">       javax.servlet.forward.context_path====/web</span></span><br><span class="line"><span class="comment">       javax.servlet.forward.servlet_path====/some</span></span><br><span class="line"><span class="comment">       javax.servlet.forward.mapping====org.apache.catalina.core.ApplicationMapping$MappingImpl@2df42e1f</span></span><br><span class="line"><span class="comment">       username====小灰灰</span></span><br><span class="line"><span class="comment">       **/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"username = "</span>+username);   <span class="comment">//username = 小灰灰</span></span><br><span class="line">    System.out.println(<span class="string">"address = "</span>+address);     <span class="comment">//address = null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h5 id="服务端相关信息"><a href="#服务端相关信息" class="headerlink" title="服务端相关信息"></a>服务端相关信息</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/20 13:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取请求的URL</span></span><br><span class="line">    StringBuffer requestUrl = request.getRequestURL();</span><br><span class="line">    System.out.println(<span class="string">"requestUrl ="</span>+requestUrl);    <span class="comment">//requestUrl =http://localhost:8080/web/some</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取请求的URL:URL去掉请求协议及主机的剩余部分</span></span><br><span class="line">    String requestURI = request.getRequestURI();</span><br><span class="line">    System.out.println(<span class="string">"requestURI = "</span>+requestURI);   <span class="comment">//requestURI = /web/some</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取当前Web应用的根路径</span></span><br><span class="line">    String contextPath = request.getContextPath();</span><br><span class="line">    System.out.println(<span class="string">"contextPath = "</span>+contextPath);     <span class="comment">//contextPath = /web</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取客户端ip</span></span><br><span class="line">    String remoteAddr = request.getRemoteAddr();</span><br><span class="line">    System.out.println(<span class="string">"clientIp = "</span>+remoteAddr);   <span class="comment">//clientIp = 0:0:0:0:0:0:0:1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取UrlPattern的精确部分</span></span><br><span class="line">    String servletPath = request.getServletPath();</span><br><span class="line">    System.out.println(<span class="string">"servletPath = "</span>+servletPath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取通配符位置的路径</span></span><br><span class="line">    String pathInfo = request.getPathInfo();</span><br><span class="line">    System.out.println(<span class="string">"pathInfo = "</span>+pathInfo);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











<h4 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h4><p>在浏览器中表单中输入的中文，一旦由浏览器经过Http协议传输，则这些数据均以字节的形式上传给服务器。因为Http协议的底层使用的是TCP传输协议。TCP(Transmission Control Protocol),传输控制协议，是一种面向连接的、可靠的、基于字节流的、端对端的通信协议。在请求中，这些字节均以%开头，并以十六进制的形式出现，如%5A%3D等。</p>
<p><strong>乱码形成的原因：</strong></p>
<p>​    当用户通过浏览器提交一个包含UTF-8编码格式的两个字的中文的请求时，浏览器会将这两个中文字符变为六个字节(一般一个UTF-8占用三个字节)，即形成六个类似%8E的字节表示形式，并将这六个字节上传至Tomcat服务器。</p>
<p>​    Tomcat服务器在接收到这六个字节之后，并不知道它们原始采用什么字符编码。而Tomcat默认的编码格式为ISO-8859-1。所以会将这六个字节按照ISO-8859-1的格式进行编码，编码后再控制台显示，所以在控制台显示，所以控制台会乱码。</p>
<h5 id="解决POST提交时候的中文乱码问题"><a href="#解决POST提交时候的中文乱码问题" class="headerlink" title="解决POST提交时候的中文乱码问题"></a>解决POST提交时候的中文乱码问题</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/20 13:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RegisterServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    doGet(request, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//解决POST提交时的中文乱码问题,但无法解决GET提交的中文乱码</span></span><br><span class="line">    <span class="comment">//setCharacterEncoding()方法设置了请求正文的字符编码</span></span><br><span class="line">    request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String age = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name = "</span>+name);     <span class="comment">//name = 小灰灰</span></span><br><span class="line">    System.out.println(<span class="string">"age = "</span>+age);       <span class="comment">//age = 20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="解决GET和POST提交时候的中文乱码问题（通用版）"><a href="#解决GET和POST提交时候的中文乱码问题（通用版）" class="headerlink" title="解决GET和POST提交时候的中文乱码问题（通用版）"></a>解决GET和POST提交时候的中文乱码问题（通用版）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/20 13:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RegisterServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    doGet(request, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//解决POST提交时的中文乱码问题,但无法解决GET提交的中文乱码</span></span><br><span class="line">    <span class="comment">//setCharacterEncoding()方法设置了请求正文的字符编码</span></span><br><span class="line">    <span class="comment">//request.setCharacterEncoding("UTF-8");</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//此处接收到的username,其字符编码为ISO8859-1</span></span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    <span class="comment">//将name字符串按照原编码进行打散</span></span><br><span class="line">    <span class="keyword">byte</span>[] bytes = name.getBytes(<span class="string">"ISO8859-1"</span>);</span><br><span class="line">    <span class="comment">//将bytes字节组按照指定字符编码进行组装,组装为String</span></span><br><span class="line">    name = <span class="keyword">new</span> String(bytes,<span class="string">"UTF-8"</span>);</span><br><span class="line">    String age = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name = "</span>+name);     <span class="comment">//name = 小灰灰</span></span><br><span class="line">    System.out.println(<span class="string">"age = "</span>+age);       <span class="comment">//age = 20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>此方法的缺点是：当请求参数一大的时候，就会很浪费内存。</p>
<h4 id="HttpServletResponse"><a href="#HttpServletResponse" class="headerlink" title="HttpServletResponse"></a>HttpServletResponse</h4><p>​    Web服务器收到一个Http请求后，会针对每一个请求创建一个HttpServletRequest对象和HttpServletResponse对象。若需要获取客户端提交请求的相关信息，则需要从HttpServletRequest对象中获取；若需要向客户端发送数据，则需要通过HttpServletResponse对象来完成。</p>
<h5 id="向客户端发送数据"><a href="#向客户端发送数据" class="headerlink" title="向客户端发送数据"></a>向客户端发送数据</h5><p>​    ServletResponse接口有一个方法getWriter()，用于获取到一个输出流对象PrintWriter()，该输出流对象是专门用于向客户端浏览器中输出字符数据的，称为标准输出流。</p>
<h5 id="响应乱码的解决方案"><a href="#响应乱码的解决方案" class="headerlink" title="响应乱码的解决方案"></a>响应乱码的解决方案</h5><p>​    若在PrintWriter流中写入中文字符，那么在客户端浏览器中将显示乱码。</p>
<p>解决方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/20 16:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//设置响应的MIME类型,后面可指定响应体的字符编码</span></span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取标准输出流</span></span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">//向标准输出流写入数据,客户端浏览器就会看到这些数据</span></span><br><span class="line">    out.append(<span class="string">"abc"</span>);</span><br><span class="line">    <span class="comment">//但是中文会在浏览器中出现乱码问题</span></span><br><span class="line">    out.write(<span class="string">"小灰灰"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//不需要手动关闭,对象销毁时会自动关闭</span></span><br><span class="line">    out.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











<h4 id="请求转发与重定向"><a href="#请求转发与重定向" class="headerlink" title="请求转发与重定向"></a>请求转发与重定向</h4><p>​    通过HttpServletRequest获取到的RequestDispathcer对象的forword()方法，可以完成请求转发功能。而通过HttpServletResponse的sendRedirect()方法，可以完成重定向功能。</p>
<p><strong>重定向不保留第一次请求时的数据</strong></p>
<p><img src="/images/Servlet/image-20201021113129796.png" alt="image-20201021113129796"></p>
<p><img src="/images/Servlet/image-20201021113347155.png" alt="image-20201021113347155"></p>
<p>​        <strong>请求转发和请求重定向均指的是请求的跳转方式。用户提交请求需要访问服务器的资源1，而资源1又需要访问资源2，那么由资源1到资源2的跳转有两种方式：请求转发与重定向。</strong></p>
<h5 id="请求转发："><a href="#请求转发：" class="headerlink" title="请求转发："></a>请求转发：</h5><p>someServlet.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 11:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">   </span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String age = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name = "</span>+name);		<span class="comment">//name=小灰灰</span></span><br><span class="line">    System.out.println(<span class="string">"age = "</span>+age);		<span class="comment">//age</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//向request域中放入属性</span></span><br><span class="line">    request.setAttribute(<span class="string">"attrName"</span>,name);</span><br><span class="line">    request.setAttribute(<span class="string">"attrAge"</span>,age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//请求转发</span></span><br><span class="line">    request.getRequestDispatcher(<span class="string">"/other"</span>).forward(request,response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>otherServlet.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 11:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"OtherServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OtherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//因为请求转发过来了,所以此处能获取到someServlet的请求</span></span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String age = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name === "</span>+name);   <span class="comment">//name === 小灰灰</span></span><br><span class="line">    System.out.println(<span class="string">"age === "</span>+age);     <span class="comment">//age === 20</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//从request域中获取属性</span></span><br><span class="line">    String attrName = (String)request.getAttribute(<span class="string">"attrName"</span>);</span><br><span class="line">    String attrAge = (String) request.getAttribute(<span class="string">"attrAge"</span>);</span><br><span class="line">    System.out.println(<span class="string">"attrName = "</span>+attrName);   <span class="comment">//attrName = 小灰灰</span></span><br><span class="line">    System.out.println(<span class="string">"attrAge = "</span>+attrAge);     <span class="comment">//attrAge = 20</span></span><br><span class="line"></span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    out.println(<span class="string">"this is OtherServlet"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="重定向："><a href="#重定向：" class="headerlink" title="重定向："></a>重定向：</h5><p>SomeServlet.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 11:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//此处接收到的username,其字符编码为ISO8859-1</span></span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String age = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name = "</span>+name);</span><br><span class="line">    System.out.println(<span class="string">"age = "</span>+age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//向request域中放入属性</span></span><br><span class="line">    request.setAttribute(<span class="string">"attrName"</span>,name);</span><br><span class="line">    request.setAttribute(<span class="string">"attrAge"</span>,age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重定向</span></span><br><span class="line">  response.sendRedirect(request.getContextPath()+<span class="string">"/other"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>OtherServlet.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 11:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"OtherServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OtherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从request域中获取属性</span></span><br><span class="line">    String attrName = (String)request.getAttribute(<span class="string">"attrName"</span>);</span><br><span class="line">    String attrAge = (String) request.getAttribute(<span class="string">"attrAge"</span>);</span><br><span class="line">    System.out.println(<span class="string">"attrName = "</span>+attrName);   <span class="comment">//attrName = null</span></span><br><span class="line">    System.out.println(<span class="string">"attrAge = "</span>+attrAge);     <span class="comment">//attrAge = null</span></span><br><span class="line"></span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    out.println(<span class="string">"this is OtherServlet"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为响应的地址已经被重定向了，所以之前的SomeServlet的请求到的数据在OtherServlet中获取不到了。</p>
<p>如果要在重定向后获取得到之前的数据，则采用以下方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">"other?pname=xhh&amp;page=20"</span>);</span><br></pre></td></tr></table></figure>







<h5 id="重定向时数据传递的中文乱码问题："><a href="#重定向时数据传递的中文乱码问题：" class="headerlink" title="重定向时数据传递的中文乱码问题："></a>重定向时数据传递的中文乱码问题：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 11:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//此处接收到的username,其字符编码为ISO8859-1</span></span><br><span class="line">    String name = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String age = request.getParameter(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name = "</span>+name);</span><br><span class="line">    System.out.println(<span class="string">"age = "</span>+age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//向request域中放入属性</span></span><br><span class="line">    request.setAttribute(<span class="string">"attrName"</span>,name);</span><br><span class="line">    request.setAttribute(<span class="string">"attrAge"</span>,age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//解决中文乱码问题</span></span><br><span class="line">    name = URLEncoder.encode(name,<span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重定向</span></span><br><span class="line">    response.sendRedirect(<span class="string">"other?pname="</span>+name+<span class="string">"&amp;page="</span>+age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h5 id="重定向到其它应用"><a href="#重定向到其它应用" class="headerlink" title="重定向到其它应用"></a>重定向到其它应用</h5><p>​    重定向与请求转发重要的不同点是：重定向可以跳到其它应用中，而请求转发只能在当前应用中跳转。</p>
<h5 id="请求转发与重定向的对比"><a href="#请求转发与重定向的对比" class="headerlink" title="请求转发与重定向的对比"></a>请求转发与重定向的对比</h5><ol>
<li>请求转发<ul>
<li>浏览器只发出一次请求，收到一次响应</li>
<li>请求所转发到的资源中可以直接获取到请求中携带的数据</li>
<li>浏览器地址栏显示的为用户所提交的请求路径</li>
<li>只能跳转到当前应用的资源</li>
</ul>
</li>
</ol>
<ol start="2">
<li>重定向<ul>
<li>浏览器发出两次请求，接收两次响应</li>
<li>重定向到的资源不能直接获取到用户提交请求中携带的数据</li>
<li>浏览器地址栏显示的为重定向的请求路径，而非用户提交请求的路径。所以重定向可以防止表单重复提交</li>
<li>重定向不仅可以跳转到当前应用的其它资源，也可以跳转到其它应用的资源</li>
</ul>
</li>
</ol>
<h5 id="请求转发与重定向的选择"><a href="#请求转发与重定向的选择" class="headerlink" title="请求转发与重定向的选择"></a>请求转发与重定向的选择</h5><ol>
<li>如果要跳转到其它应用，则使用重定向。</li>
<li>如果是处理表单数据的Servlet要跳转到其它Servlet，则需要选择重定向。为了防止表单的重复提交。</li>
<li>若对某一请求进行处理的Servlet的执行需要消耗大量的服务器资源，此时Servlet执行完毕后，也需要重定向。</li>
<li>其它情况，一般使用请求转发。</li>
</ol>
<h4 id="RequestDispatcher"><a href="#RequestDispatcher" class="headerlink" title="RequestDispatcher"></a>RequestDispatcher</h4><p>​    RequestDispatcher接口有两个方法:forward()和include()。</p>
<p><strong>include的转发模式：</strong></p>
<p><img src="/images/Servlet/image-20201022141511804.png" alt="image-20201022141511804"></p>
<h5 id="requestDispatcher的forward-和include-的区别"><a href="#requestDispatcher的forward-和include-的区别" class="headerlink" title="requestDispatcher的forward()和include()的区别"></a>requestDispatcher的forward()和include()的区别</h5><p>forward()和include()的区别：主要表现在标准输出流的开启时间不同。</p>
<p>forward()：表示转发，当前的请求转发给了另一个组件，响应结果由另一个组件响应。所以服务器不会在此组件内打开标准输出流。所以在当前组件中写入到流的数据是不会写入到浏览器中。</p>
<p>include()：表示包含，说明另一个组件的请求结果将会响应到当前组件之中，并跟当前组件中的流一起输出(写入到浏览器)。</p>
<p>show me code:</p>
<p>SomeServlet.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 16:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"SomeServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/***</span></span><br><span class="line"><span class="comment">   *无论是forward()还是include(),对于请求来说,都是一样的</span></span><br><span class="line"><span class="comment">   * 它们的不同点主要集中在响应对象</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">//    System.out.println("request = "+request);   //request = org.apache.catalina.connector.RequestFacade@75148595</span></span><br><span class="line"><span class="comment">//    System.out.println("response ="+response);  //response =org.apache.catalina.connector.ResponseFacade@35c83e12</span></span><br><span class="line"></span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    out.println(<span class="string">"SomeServlet:include() before"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//请求转发</span></span><br><span class="line">    request.getRequestDispatcher(<span class="string">"/other"</span>).include(request,response);</span><br><span class="line"></span><br><span class="line">    out.println(<span class="string">"SomeServlet:include() after"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>OtherServlet.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/21 16:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"OtherServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OtherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">//    System.out.println("request === "+request);   //request === org.apache.catalina.core.ApplicationHttpRequest@4b78c41a</span></span><br><span class="line"><span class="comment">//    System.out.println("response === "+response);   //response === org.apache.catalina.connector.ResponseFacade@35c83e12</span></span><br><span class="line"></span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    out.println(<span class="string">"OtherServlet:include()"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>输出结果:</p>
<p><img src="/images/Servlet/image-20201021172633065.png" alt="image-20201021172633065"></p>
<h4 id="Servlet线程安全问题"><a href="#Servlet线程安全问题" class="headerlink" title="Servlet线程安全问题"></a>Servlet线程安全问题</h4><p>​    Servlet是在单例多线程环境下运行的。其运行可能出现线程安全问题。</p>
<h5 id="什么时候会出现线程安全问题？"><a href="#什么时候会出现线程安全问题？" class="headerlink" title="什么时候会出现线程安全问题？"></a>什么时候会出现线程安全问题？</h5><ul>
<li>存在多线程并发访问</li>
<li>存在可修改的共享数据</li>
</ul>
<p>当多个线程同时修改同一个共享数据的时候，后修改的数据会将前修改的数据覆盖，对数据先进行修改的用户读取到的不是自己修改后的数据，这就是线程安全问题。</p>
<h5 id="JVM中可能存在线程安全问题的数据分析"><a href="#JVM中可能存在线程安全问题的数据分析" class="headerlink" title="JVM中可能存在线程安全问题的数据分析"></a>JVM中可能存在线程安全问题的数据分析</h5><h6 id="A、栈内存数据分析"><a href="#A、栈内存数据分析" class="headerlink" title="A、栈内存数据分析"></a>A、栈内存数据分析</h6><p>​    栈内存是多例的，即JVM会为每个线程创建一个栈，所以其中的数据是不能共享的。另外，方法中的局部变量存放在Stack的栈帧的，方法执行完毕，栈帧弹栈，局部变量消失。局部变量是局部的，不能共享的。所以栈内存中的数据不存在线程安全问题。</p>
<h6 id="B、堆内存数据分析"><a href="#B、堆内存数据分析" class="headerlink" title="B、堆内存数据分析"></a>B、堆内存数据分析</h6><p>​    一个JVM中只存在一个堆内存，堆内存是共享的。被创建出来的对象是存放在堆内存的，而存放在堆内存中的对象，实际就是对象成员变量的值的集合。即成员变量是存放在堆内存的。堆内存中的数据是多线程共享的，也就是说，堆内存中的数据是存在线程安全问题的。</p>
<h6 id="C、方法区数据分析"><a href="#C、方法区数据分析" class="headerlink" title="C、方法区数据分析"></a>C、方法区数据分析</h6><p>​    一个JVM中只存在一个方法区。静态变量与常量存放在方法区，方法区是多线程共享的。常量是不能被修改的量，所以常量不存在线程安全的问题。静态变量是多线程共享的。所以静态变量存在线程安全问题。</p>
<h6 id="线程安全的解决方案："><a href="#线程安全的解决方案：" class="headerlink" title="线程安全的解决方案："></a>线程安全的解决方案：</h6><ul>
<li>对于一般的类，不要定义为单例的。除非项目有特殊需求，或该类对象属于重量级对象。所谓重量级对象是指，创建该类对象时需要占用较大的系统资源。</li>
<li>无论类是否为单例，尽量不要使用静态变量。</li>
<li>若需要定义为单例类，则单例类中尽量不要使用成员变量。</li>
<li>若单例类中必须要使用成员变量，则对成员变量的操作，可以添加串行化synchronized，实现线程同步。不过，最好不要使用线程同步机制。因为一旦操作串行化的排队状态，将大大降低程序的执行效率。</li>
</ul>
<p>​    </p>
<p>​    Servlet是单例多线程并发访问的，所以其就可能会出现线程安全问题。为了避免线程安全问题的产生，对于Servlet的使用，一般是不声明成员变量的，若要真的声明成员变量，则只能通过线程同步机制synchronized避免。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/23 22:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"LoginServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//对成员变量的修改</span></span><br><span class="line"></span><br><span class="line">      username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">      System.out.println(<span class="string">"username = "</span>+username);</span><br><span class="line"></span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      out.println(<span class="string">"username = "</span>+username);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>以上代码如果进行多个http请求就会出现线程安全问题，username的值就会被第二个请求覆盖。</p>
<p>解决方法是在代码块中加入synchronized。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> coderYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/10/23 22:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"LoginServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//对成员变量的修改</span></span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>)&#123;</span><br><span class="line">      username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">      System.out.println(<span class="string">"username = "</span>+username);</span><br><span class="line">      PrintWriter out = response.getWriter();</span><br><span class="line">      out.println(<span class="string">"username = "</span>+username);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="http://xhh460.github.io">小灰灰</a></p><p> <span>Link:  </span><a href="http://xhh460.github.io/2020/10/09/Servlet/">http://xhh460.github.io/2020/10/09/Servlet/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed.</span></p></div><div class="post-paginator"><a class="prevSlogan" href="/2020/10/26/Jsp/" title="Jsp"><span>< PreviousPost</span><br><span class="prevTitle">Jsp</span></a><a class="nextSlogan" href="/2020/09/27/koa/" title="koa"><span>NextPost ></span><br><span class="nextTitle">koa</span></a><div class="clear"></div></div><div id="comment"></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo" target="_blank" rel="noopener"><span>Cxo</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?" + 'true';
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 70vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet"><span class="toc-number">1.</span> <span class="toc-text">Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet生命周期"><span class="toc-number">1.0.1.</span> <span class="toc-text">Servlet生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#生命周期方法执行流程图"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">生命周期方法执行流程图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Servlet特征"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">Servlet特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Web容器启动时创建Servlet实例"><span class="toc-number">1.0.1.3.</span> <span class="toc-text">Web容器启动时创建Servlet实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Servlet中的两个map"><span class="toc-number">1.0.1.4.</span> <span class="toc-text">Servlet中的两个map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ServletConfig的使用"><span class="toc-number">1.0.1.5.</span> <span class="toc-text">ServletConfig的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ServletContext的用法"><span class="toc-number">1.0.1.6.</span> <span class="toc-text">ServletContext的用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lt-url-pattern-gt-的设置"><span class="toc-number">1.0.1.7.</span> <span class="toc-text">&lt; url-pattern/&gt;的设置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-精确路径模式-多个url可以访问一个Servlet"><span class="toc-number">1.0.1.7.1.</span> <span class="toc-text">(1)精确路径模式:多个url可以访问一个Servlet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-通配符路径模式"><span class="toc-number">1.0.1.7.2.</span> <span class="toc-text">(2)通配符路径模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-全路径匹配模式和后缀名匹配模式"><span class="toc-number">1.0.1.7.3.</span> <span class="toc-text">(3)全路径匹配模式和后缀名匹配模式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#urlPattern匹配原则"><span class="toc-number">1.0.1.8.</span> <span class="toc-text">urlPattern匹配原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet核心"><span class="toc-number">1.0.2.</span> <span class="toc-text">Servlet核心</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GenericServlet"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">GenericServlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#抽象类实现接口"><span class="toc-number">1.0.2.1.1.</span> <span class="toc-text">抽象类实现接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#GenericServlet中的init方法"><span class="toc-number">1.0.2.1.2.</span> <span class="toc-text">GenericServlet中的init方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServlet"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">HttpServlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#自定义HttpServlet-java"><span class="toc-number">1.0.2.2.1.</span> <span class="toc-text">自定义HttpServlet.java</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LoginServlet继承HttpServlet"><span class="toc-number">1.0.2.2.2.</span> <span class="toc-text">LoginServlet继承HttpServlet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#如果get和post请求都支持的话，使用以下写法"><span class="toc-number">1.0.2.2.3.</span> <span class="toc-text">如果get和post请求都支持的话，使用以下写法:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServletRequest"><span class="toc-number">1.0.2.3.</span> <span class="toc-text">HttpServletRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#请求的生命周期"><span class="toc-number">1.0.2.3.1.</span> <span class="toc-text">请求的生命周期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#请求参数"><span class="toc-number">1.0.2.3.2.</span> <span class="toc-text">请求参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#域属性"><span class="toc-number">1.0.2.3.3.</span> <span class="toc-text">域属性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#SomeServlet-java"><span class="toc-number">1.0.2.3.3.1.</span> <span class="toc-text">SomeServlet.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#OtherServlet-java"><span class="toc-number">1.0.2.3.3.2.</span> <span class="toc-text">OtherServlet.java</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#服务端相关信息"><span class="toc-number">1.0.2.3.4.</span> <span class="toc-text">服务端相关信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#中文乱码问题"><span class="toc-number">1.0.2.4.</span> <span class="toc-text">中文乱码问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#解决POST提交时候的中文乱码问题"><span class="toc-number">1.0.2.4.1.</span> <span class="toc-text">解决POST提交时候的中文乱码问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#解决GET和POST提交时候的中文乱码问题（通用版）"><span class="toc-number">1.0.2.4.2.</span> <span class="toc-text">解决GET和POST提交时候的中文乱码问题（通用版）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServletResponse"><span class="toc-number">1.0.2.5.</span> <span class="toc-text">HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#向客户端发送数据"><span class="toc-number">1.0.2.5.1.</span> <span class="toc-text">向客户端发送数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#响应乱码的解决方案"><span class="toc-number">1.0.2.5.2.</span> <span class="toc-text">响应乱码的解决方案</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#请求转发与重定向"><span class="toc-number">1.0.2.6.</span> <span class="toc-text">请求转发与重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#请求转发："><span class="toc-number">1.0.2.6.1.</span> <span class="toc-text">请求转发：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#重定向："><span class="toc-number">1.0.2.6.2.</span> <span class="toc-text">重定向：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#重定向时数据传递的中文乱码问题："><span class="toc-number">1.0.2.6.3.</span> <span class="toc-text">重定向时数据传递的中文乱码问题：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#重定向到其它应用"><span class="toc-number">1.0.2.6.4.</span> <span class="toc-text">重定向到其它应用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#请求转发与重定向的对比"><span class="toc-number">1.0.2.6.5.</span> <span class="toc-text">请求转发与重定向的对比</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#请求转发与重定向的选择"><span class="toc-number">1.0.2.6.6.</span> <span class="toc-text">请求转发与重定向的选择</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestDispatcher"><span class="toc-number">1.0.2.7.</span> <span class="toc-text">RequestDispatcher</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#requestDispatcher的forward-和include-的区别"><span class="toc-number">1.0.2.7.1.</span> <span class="toc-text">requestDispatcher的forward()和include()的区别</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Servlet线程安全问题"><span class="toc-number">1.0.2.8.</span> <span class="toc-text">Servlet线程安全问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#什么时候会出现线程安全问题？"><span class="toc-number">1.0.2.8.1.</span> <span class="toc-text">什么时候会出现线程安全问题？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JVM中可能存在线程安全问题的数据分析"><span class="toc-number">1.0.2.8.2.</span> <span class="toc-text">JVM中可能存在线程安全问题的数据分析</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#A、栈内存数据分析"><span class="toc-number">1.0.2.8.2.1.</span> <span class="toc-text">A、栈内存数据分析</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#B、堆内存数据分析"><span class="toc-number">1.0.2.8.2.2.</span> <span class="toc-text">B、堆内存数据分析</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#C、方法区数据分析"><span class="toc-number">1.0.2.8.2.3.</span> <span class="toc-text">C、方法区数据分析</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#线程安全的解决方案："><span class="toc-number">1.0.2.8.2.4.</span> <span class="toc-text">线程安全的解决方案：</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>