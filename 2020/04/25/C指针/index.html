<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="小灰灰"><meta name="renderer" content="webkit"><meta name="copyright" content="小灰灰"><meta name="keywords" content="小灰灰"><meta name="description" content=""><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>C指针 · xhh's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/people1.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="/img/assets/people.png"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">xiaohuihui</div><div class="profile-signature">for me</div><div class="friends"><div>FRIENDS</div><span><a href="//www.cnblogs.com/lc-snail/" target="_black">friendA</a></span><span><a href="//github.com/" target="_black">friendB</a></span><span><a href="//github.com/" target="_black">friendC</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 70vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">xhh's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">C指针</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-calendar"></i><span>2020-04-25 22:25:50</span></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">2.8k</span> | Reading time: <span class="post-count">11</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><h1 id="C指针学习"><a href="#C指针学习" class="headerlink" title="C指针学习"></a>C指针学习</h1><h4 id="先普及一下C语言中每个数据类型所占的字节。"><a href="#先普及一下C语言中每个数据类型所占的字节。" class="headerlink" title="先普及一下C语言中每个数据类型所占的字节。"></a>先普及一下C语言中每个数据类型所占的字节。</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>：    <span class="number">1</span>个字节</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>：    <span class="number">1</span>个字节</span><br><span class="line"></span><br><span class="line"><span class="keyword">short</span>：   <span class="number">2</span>个字节</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>：     <span class="number">4</span>个字节</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span>：    <span class="number">4</span>个字节</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span>:   <span class="number">8</span>个字节</span><br></pre></td></tr></table></figure>

<p>一个字节(byte)=八位(bit)</p>
<h4 id="什么是内存？内存，CPU，硬盘之间的关系？"><a href="#什么是内存？内存，CPU，硬盘之间的关系？" class="headerlink" title="什么是内存？内存，CPU，硬盘之间的关系？"></a>什么是内存？内存，CPU，硬盘之间的关系？</h4><p>一个C语言程序必须载入内存才能运行（任何程序都是这样），CPU也被设计为只能从内存中读取数据和指令.</p>
<p>在我理解的程序运行机制中,内存是CPU和硬盘的一个中间件,没有内存,CPU是无法执行的，CPU从内存或缓存中取出指令，放入指令寄存器，并对指令译码进行分解，进而对数据进行处理。这么说吧，计算机中所有的程序运行都是在内存中进行的，因此内存对计算机性能的影响非常大。数据由传输速度较慢的硬盘通过内存传送到CPU进行处理。不过内存是带电存储的(断电数据就会消失)，而且容量十分有限，所以要长时间储存程序或数据就需要使用硬盘。</p>
<h4 id="什么是指针？"><a href="#什么是指针？" class="headerlink" title="什么是指针？"></a>什么是指针？</h4><ul>
<li>指针也就是内存地址，指针变量是用来存放内存地址的变量，不同类型的指针变量所占用的存储单元长度是相同的，而存放数据的变量因数据的类型不同，所占用的存储空间长度也不同。有了指针以后，不仅可以对数据本身，也可以对存储数据的变量地址进行操作。</li>
</ul>
<h4 id="为什么使用指针"><a href="#为什么使用指针" class="headerlink" title="为什么使用指针?"></a>为什么使用指针?</h4><ul>
<li><p>任何程序数据载入内存后，在内存都有他们的地址，这就是指针。而为了保存一个数据在内存中的地址，我们就需要指针变量。一般指针变量指向的是内存中的首地址，指针是根据内存地址来取值的,不是根据内存来取值。</p>
</li>
<li><p>定义了一个int变量num，如下是它在内存中所占的空间及地址。</p>
</li>
<li><p><img src="/images/C%E6%8C%87%E9%92%88/BAKFEC_T4$G2%7D48KW%5DM%5D%5D3O.png" alt=""></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">0X01020304</span>;    <span class="comment">//定义十六进制的数</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span>* p1 = &amp;num;        <span class="comment">//定义指向类型为int的指针内存地址</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p1=%#x\n"</span>, *p1);    <span class="comment">//0x01020304</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">short</span>* p2 = &amp;num;      <span class="comment">//指向类型short占2个字节,所以是int类型内存地址的一半</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p2=%#x\n"</span>, *p2);      <span class="comment">//0X0304   在windows和linux中地址是反过来排序的</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span>* p3 = &amp;num;      <span class="comment">//指向类型char占1个字节,所以是int内存地址的四分之一</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p3=%#x\n"</span>, *p3);     <span class="comment">//0x04</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">short</span>* p4 = &amp;num;</span><br><span class="line">	p4++;     <span class="comment">//p4+1后  地址跨度为2格   因为指向类型short占俩个字节,而int内存地址占四格</span></span><br><span class="line"> 	<span class="built_in">printf</span>(<span class="string">"*p4=%#x\n"</span>, *p4);    <span class="comment">//0X0102</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**因为一般指针取值都是根据指向类型而从左往右取值的,我们知道int占四个字节,所以可以理解为四个方块</span></span><br><span class="line"><span class="comment">	,而假如我们要取中间俩个地址的值,就要用到类型转化,首先要跨一个字节(+1)(要看指向类型而定义,这里指char),即跨一个方块,然后在进行转换为2个字节(short),即可获得俩个中间俩个字节所占的内存地址**/</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span>* p5 = &amp;num;</span><br><span class="line">	p5 = p5 + <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p5=%#x\n"</span>, *(<span class="keyword">short</span> *)p5);     <span class="comment">//0203</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span>    <span class="comment">//用来测试俩个指针共享数据</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">/**指针赋值和int变量赋值一样，就是将地址的值拷贝给另外一个。指针之间的赋值是一种浅拷贝，是在多个编程单元之间共享内存数据的高效的方法。**/</span></span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span>* p1 = &amp;num;</span><br><span class="line">	<span class="keyword">int</span>* p3 = p1;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p1的值为:%d\n"</span>, *p1);    <span class="comment">//10</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p3的值为:%d"</span>, *p3);    <span class="comment">//10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	test();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果图片:</p>
<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426002039662.png" alt="image-20200426002039662"></p>
</li>
</ul>
<h4 id="一维数组与指针"><a href="#一维数组与指针" class="headerlink" title="一维数组与指针"></a>一维数组与指针</h4><ul>
<li>假定我们声明数组a[4]和数组b[4],分别利用指针<em>p和</em>q来指向俩个数组。一般指针*p指向的即使a[0]的内存地址，而指针q指向的也是数组b[0]的内存地址，当指针每次加1的时候,根据指向类型，可判断跨度，在这里我声明俩个指针的指向类型为int类型,每次加一,跨自身为1，所以在这里，指针每次加一，数组元素也加一。</li>
</ul>
<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426111824054.png" alt="image-20200426111824054"></p>
<p>举例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* p, * q, a[<span class="number">5</span>], b[<span class="number">5</span>], i;</span><br><span class="line">	p = &amp;a[<span class="number">0</span>];   <span class="comment">//指针p指向数组a的内存地址    a[0]表示数组的第一个元素的地址</span></span><br><span class="line">	q = b;       <span class="comment">//b[0]或者b用来表示数组第一个元素的地址</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入数组a的值:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		scanf_s(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入数组b的值\n"</span>);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		scanf_s(<span class="string">"%d"</span>, &amp;b[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"数组a是:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%5d"</span>, *(p + i));     <span class="comment">//使用指针输出一维数组 每次循环+1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"数组b是:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%5d"</span>, *(q + i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>赋值与输出结果为：</p>
<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426112530372.png" alt="image-20200426112530372"></p>
<h4 id="二维数组与指针"><a href="#二维数组与指针" class="headerlink" title="二维数组与指针"></a>二维数组与指针</h4><p>二维数组在概念上是二维的,有行也有列。</p>
<p>一般排序应该类似于一个矩阵,但是在C语言的内存中，它是一行排序过来的，意思就是占用一连续的内存。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;, &#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125; &#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/images/C%E6%8C%87%E9%92%88/1-160H11I6303X.jpg" alt="1-160H11I6303X"></p>
<p>就像上图一样排序。</p>
<p>我们可以把它分解为3个一维数组a[0],a[1],a[2],而在每个一维数组又包含了4个元素，比如a[0]数组包含了a[0],a[1],a[2],a[3]。如此一来，是不是很清晰透彻，在一维数组中，指针每次+1，一维数组的元素也就会自增+1，所以，在二维数组中，指针+1也跟一维数组中的指针+1相同。二维每次+1，它就垮了一个数组元素，而数组元素中的自然也要加进去，相当于它垮了四个数组元素的字节长度。下面举例说明：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;, &#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125; &#125;;</span><br><span class="line">    <span class="keyword">int</span>(*p)[<span class="number">4</span>] = a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(*(p + <span class="number">1</span>)));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*指针p指向的是数组a的开头a[0],就是指向第0行,当指针+1的时候,它就会跨一行,而一行里面有四个int类型的元素且p指向的是int类型,每个元素占4个字节,所以当跨一行的时候,就会前进16个字节*/</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426135047894.png" alt="image-20200426135047894"></p>
<p>而<code>*(p+1)+1</code>则肯定是第一行的第一个元素,在此不要混淆。</p>
<h4 id="指向指针的指针"><a href="#指向指针的指针" class="headerlink" title="指向指针的指针"></a>指向指针的指针</h4><p>如果一个指针变量存放的又是另一个指针变量的地址，则称这个变量为指向指针的指针变量或指向指针的指针。</p>
<p>声明格式:类型标识符 **指针变量名 ,也可以这样声明:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> **p   ==  <span class="keyword">int</span> *(*p)</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span>** p;    <span class="comment">//声明指针类型为char的指针</span></span><br><span class="line">	<span class="keyword">char</span>* arr[] = &#123; <span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>,<span class="string">"F"</span>,<span class="string">"G"</span>,<span class="string">"H"</span> &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">		<span class="comment">//为什么使用指向指针的指针,因为arr也是一个指针,如果要指向arr这个指针,需要定义一个指向指针的指针,否则会报错。</span></span><br><span class="line">		p = arr + i;      <span class="comment">//指针p每次+1   </span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, *p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426142414946.png" alt="image-20200426142414946"></p>
<p>相当于一个指针指向的地址,赋给里一个指针。所附的指针,指向一个已经指向地址的指针的地址。</p>
<h4 id="指针变量作函数参数"><a href="#指针变量作函数参数" class="headerlink" title="指针变量作函数参数"></a>指针变量作函数参数</h4><p>函数的参数,可以传很多东西,在php中函数的变量可以传对象,也就是闭包，还有数组,字符串各种,都可以传,但是php的话,声明变量不像C语言和java需要声明数据类型,因为在php中,这些东西都是在底层封装好的。</p>
<p>但是在C语言中的话,像数组、字符串、动态分配的内存等都是一系列数据的集合，没有办法通过一个参数全部传入函数内部，只能传递它们的指针，在函数内部通过指针来影响这些数据集合。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp;   <span class="comment">//临时变量</span></span><br><span class="line">	temp = a;</span><br><span class="line">	a = b;</span><br><span class="line">	b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>, b = <span class="number">20</span>;</span><br><span class="line">	swap(a, b);    <span class="comment">//调用自定义的交换函数</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,b=%d\n"</span>, a, b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*按照常理,此处的输出结果应该是a=20,b=10然而结果并不是，它的结果是确是a=10,b=20根本没有交换,这是为什么,因为swap函数内部的a,b和main函数内部的a,b是不同的变量,占用着不同的内存*/</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426165041410.png" alt="image-20200426165041410"></p>
<p>当我们改用指针作变量的时候,效果就会不一样.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> *q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp;  <span class="comment">//临时变量</span></span><br><span class="line">	temp = *p;</span><br><span class="line">	*p = *q;</span><br><span class="line">	*q = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>, b = <span class="number">20</span>;</span><br><span class="line">	swap(&amp;a, &amp;b);    <span class="comment">//调用自定义的交换函数</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,b=%d\n"</span>, a, b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/C%E6%8C%87%E9%92%88/image-20200426165506751.png" alt="image-20200426165506751"></p>
<p>调用 swap() 函数时，将变量 a、b 的地址分别赋值给 p1、p2，这样 <em>p1、</em>p2 代表的就是变量 a、b 本身，交换 <em>p1、</em>p2 的值也就是交换 a、b 的值。</p>
<h4 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h4><p>C语言允许函数的返回值是一个指针（地址），我们将这样的函数称为指针函数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明格式：</span></span><br><span class="line">类型标识符  (指针函数变量名)(参数)</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> (*f)(<span class="keyword">int</span> x, <span class="keyword">int</span> y);  <span class="comment">//声明指针函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	f = &amp;add;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"10+20=%d\n"</span>, (*f)(<span class="number">10</span>, <span class="number">20</span>));    <span class="comment">//30</span></span><br><span class="line"></span><br><span class="line">	f = &amp;sub;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"10-20=%d\n"</span>, (*f)(<span class="number">10</span>, <span class="number">20</span>));    <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<p><img src="/images/C%E6%8C%87%E9%92%88/1.png" alt="1"></p>
<p>每一个函数都有一个入口地址，该入口地址就是函数指针所指向的地址。有了指向函数的指针变量后，可用该指针变量调用函数，就如同用指针变量可引用其他类型变量一样，在这些概念上是大体一致的。函数指针有两个用途：调用函数和做函数的参数。</p>
<h4 id="指针的好处："><a href="#指针的好处：" class="headerlink" title="指针的好处："></a>指针的好处：</h4><p>使用指针可以带来如下的好处：</p>
<p>（1）可以提高程序的编译效率和执行速度，使程序更加简洁。</p>
<p>（2）通过指针被调用函数可以向调用函数处返回除正常的返回值之外的其他数据，从而实现两者间的双向通信。</p>
<p>（3）利用指针可以实现动态内存分配。</p>
<p>（4）指针还用于表示和实现各种复杂的数据结构，从而为编写出更加高质量的程序奠定基础。</p>
<p>（5）利用指针可以直接操纵内存地址，从而可以完成和汇编语言类似的工作。</p>
<p>（6）更容易实现函数的编写和调用。</p>
<p>以上都是讲了一些指针的基础,没有更加强势的体现出指针的优势所在，因为正在进行数据结构学习中，后期将结合数据结构，实现指针的优势所在。</p>
</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="http://yoursite.com">小灰灰</a></p><p> <span>Link:  </span><a href="http://yoursite.com/2020/04/25/C%E6%8C%87%E9%92%88/">http://yoursite.com/2020/04/25/C%E6%8C%87%E9%92%88/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/3.0" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="nextSlogan" href="/2020/04/10/ajax%E4%B8%8D%E6%89%A7%E8%A1%8C%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%8E%9F%E5%9B%A0/" title="ajax不执行回调函数的原因"><span>NextPost ></span><br><span class="nextTitle">ajax不执行回调函数的原因</span></a><div class="clear"></div></div><div id="comment"></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo" target="_blank" rel="noopener"><span>Cxo</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 70vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#C指针学习"><span class="toc-number">1.</span> <span class="toc-text">C指针学习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#先普及一下C语言中每个数据类型所占的字节。"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">先普及一下C语言中每个数据类型所占的字节。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是内存？内存，CPU，硬盘之间的关系？"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">什么是内存？内存，CPU，硬盘之间的关系？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是指针？"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">什么是指针？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#为什么使用指针"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">为什么使用指针?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一维数组与指针"><span class="toc-number">1.0.0.5.</span> <span class="toc-text">一维数组与指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二维数组与指针"><span class="toc-number">1.0.0.6.</span> <span class="toc-text">二维数组与指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#指向指针的指针"><span class="toc-number">1.0.0.7.</span> <span class="toc-text">指向指针的指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#指针变量作函数参数"><span class="toc-number">1.0.0.8.</span> <span class="toc-text">指针变量作函数参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#函数指针"><span class="toc-number">1.0.0.9.</span> <span class="toc-text">函数指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#指针的好处："><span class="toc-number">1.0.0.10.</span> <span class="toc-text">指针的好处：</span></a></li></ol></li></ol></li></ol></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>